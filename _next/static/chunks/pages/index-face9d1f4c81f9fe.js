(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3092)}])},3092:function(e,t,n){"use strict";let r,s,a,i;n.r(t),n.d(t,{default:function(){return A}});var o=n(5893),c=n(7294),l=n(9008),u=n.n(l);let d=(e,t)=>t.some(t=>e instanceof t),p=new WeakMap,h=new WeakMap,f=new WeakMap,w={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return p.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(m(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return f.set(t,e),t}(e);if(h.has(e))return h.get(e);let n="function"==typeof(t=e)?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(g(this),e),m(this.request)}:function(...e){return m(t.apply(g(this),e))}:(t instanceof IDBTransaction&&function(e){if(p.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});p.set(e,t)}(t),d(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,w):t;return n!==e&&(h.set(e,n),f.set(n,e)),n}let g=e=>f.get(e),v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],x=new Map;function j(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(x.get(t))return x.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||v.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),s&&a.done]))[0]};return x.set(t,a),a}w={...a=w,get:(e,t,n)=>j(e,t)||a.get(e,t,n),has:(e,t)=>!!j(e,t)||a.has(e,t)};let I=["continue","continuePrimaryKey","advance"],y={},D=new WeakMap,_=new WeakMap,q={get(e,t){if(!I.includes(t))return e[t];let n=y[t];return n||(n=y[t]=function(...e){D.set(this,_.get(this)[t](...e))}),n}};async function*E(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,q);for(_.set(n,t),f.set(n,g(t));t;)yield n,t=await (D.get(n)||t.continue()),D.delete(n)}function N(e,t){return t===Symbol.asyncIterator&&d(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&d(e,[IDBIndex,IDBObjectStore])}w={...i=w,get:(e,t,n)=>N(e,t)?E:i.get(e,t,n),has:(e,t)=>N(e,t)||i.has(e,t)};let S="quizState",C=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let i=indexedDB.open(e,1),o=m(i);return r&&i.addEventListener("upgradeneeded",e=>{r(m(i.result),e.oldVersion,e.newVersion,m(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("quizApp",0,{upgrade(e){e.createObjectStore(S)}}),B=async(e,t)=>{if(!C)return;let n=await C;await n.put(S,t,e)},k=async e=>{if(!C)return null;let t=await C;return await t.get(S,e)},L=async()=>{if(!C)return;let e=await C;await e.clear(S)},P=e=>{for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var A=()=>{let[e,t]=(0,c.useState)([]),[n,r]=(0,c.useState)(null),[s,a]=(0,c.useState)(null),[i,l]=(0,c.useState)(0),[d,p]=(0,c.useState)(0),[h,f]=(0,c.useState)(!1),[w,m]=(0,c.useState)(!1),[g,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let e=await k("questions"),n=await k("correctAnswersCount"),s=await k("incorrectAnswersCount");e?(t(e),l(n||0),p(s||0),e.length>0&&r(e[0])):fetch("/canadatestprep/questions.json").then(e=>e.json()).then(e=>{let n=P(e.questions.map(e=>({...e,possible_answers:P(e.possible_answers)})));t(n),B("questions",n),r(n[0])})})(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/canadatestprep/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})},[]),(0,c.useEffect)(()=>{(async()=>{await B("questions",e),await B("correctAnswersCount",i),await B("incorrectAnswersCount",d)})()},[e,i,d]);let b=e=>{a(e)},x=async()=>{let e=await fetch("/canadatestprep/questions.json"),n=P((await e.json()).questions.map(e=>({...e,possible_answers:P(e.possible_answers)})));t(n),l(0),p(0),r(n[0]),a(null),f(!1),m(!1),v(null),await L(),await B("questions",n)},j=i+d,I=j>0?j:1,y=(i/I*100).toFixed(0),D=(d/I*100).toFixed(0);return(0,o.jsxs)("div",{className:"quiz-container",children:[(0,o.jsx)(u(),{children:(0,o.jsx)("title",{children:"Canada Test Prep Quiz"})}),(0,o.jsxs)("header",{className:"quiz-header",children:[(0,o.jsx)("h1",{children:"Canada Test Prep Quiz"}),(0,o.jsxs)("div",{className:"stats-reset",children:[(0,o.jsxs)("div",{className:"stats",children:["Correct ",i," (",y,"%) Incorrect ",d," (",D,"%) Remains ",e.length]}),(0,o.jsx)("button",{onClick:x,className:"reset-button",children:"Reset"})]})]}),(0,o.jsx)("main",{className:"quiz-main",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"question-section",children:(0,o.jsx)("div",{className:"question-text",children:n.question})}),(0,o.jsx)("div",{className:"answer-section",children:n.possible_answers.map((e,t)=>(0,o.jsx)("button",{onClick:()=>b(t),className:"answer-button ".concat(s===t?"selected":""),disabled:w,children:e.answer_text},t))}),w&&(0,o.jsx)("div",{className:"result-message ".concat(g?"correct":"incorrect"),children:g?"Correct!":"Incorrect!"}),(0,o.jsx)("button",{onClick:w?()=>{a(null),f(!1),m(!1),v(null),e.length>0?r(e[0]):r(null)}:()=>{if(null===s)return;let e=n.possible_answers[s].is_correct;v(e),e?(l(e=>e+1),t(e=>{let t=e.slice(1);return B("questions",t),t})):(p(e=>e+1),t(e=>{let t=P(e);return B("questions",t),t})),m(!0)},className:"submit-button",disabled:null===s,children:w?"Next Question":"Submit"}),(0,o.jsx)("button",{onClick:()=>f(!h),className:"answer-button",children:h?"Hide Answer":"Show Answer"}),h&&(0,o.jsxs)("div",{className:"answer-section",children:[(0,o.jsx)("blockquote",{dangerouslySetInnerHTML:{__html:n.quote.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}}),(0,o.jsxs)("p",{children:["Source: ",(0,o.jsx)("a",{href:n.online_page,target:"_blank",rel:"noopener noreferrer",children:n.paragraph})]}),(0,o.jsxs)("p",{children:["Discover Canada, Page ",n.page_number,", ",n.paragraph]})]})]}):(0,o.jsx)("p",{children:"No questions available."})}),(0,o.jsx)("footer",{className:"quiz-footer",children:"Canada Test Prep \xa92024"})]})}},9008:function(e,t,n){e.exports=n(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);