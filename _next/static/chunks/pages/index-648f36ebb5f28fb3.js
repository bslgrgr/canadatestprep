(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3092)}])},3092:function(e,t,n){"use strict";let r,s,a,i;n.r(t),n.d(t,{default:function(){return P}});var o=n(5893),c=n(7294),l=n(9008),u=n.n(l);let d=(e,t)=>t.some(t=>e instanceof t),h=new WeakMap,p=new WeakMap,f=new WeakMap,w={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(m(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return f.set(t,e),t}(e);if(p.has(e))return p.get(e);let n="function"==typeof(t=e)?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(g(this),e),m(this.request)}:function(...e){return m(t.apply(g(this),e))}:(t instanceof IDBTransaction&&function(e){if(h.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});h.set(e,t)}(t),d(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,w):t;return n!==e&&(p.set(e,n),f.set(n,e)),n}let g=e=>f.get(e),x=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],j=new Map;function v(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(j.get(t))return j.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||x.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),s&&a.done]))[0]};return j.set(t,a),a}w={...a=w,get:(e,t,n)=>v(e,t)||a.get(e,t,n),has:(e,t)=>!!v(e,t)||a.has(e,t)};let y=["continue","continuePrimaryKey","advance"],I={},D=new WeakMap,E=new WeakMap,N={get(e,t){if(!y.includes(t))return e[t];let n=I[t];return n||(n=I[t]=function(...e){D.set(this,E.get(this)[t](...e))}),n}};async function*_(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,N);for(E.set(n,t),f.set(n,g(t));t;)yield n,t=await (D.get(n)||t.continue()),D.delete(n)}function C(e,t){return t===Symbol.asyncIterator&&d(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&d(e,[IDBIndex,IDBObjectStore])}w={...i=w,get:(e,t,n)=>C(e,t)?_:i.get(e,t,n),has:(e,t)=>C(e,t)||i.has(e,t)};let B="quizState",S=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let i=indexedDB.open(e,1),o=m(i);return r&&i.addEventListener("upgradeneeded",e=>{r(m(i.result),e.oldVersion,e.newVersion,m(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("quizApp",0,{upgrade(e){e.createObjectStore(B)}}),q=async(e,t)=>{if(!S)return;let n=await S;await n.put(B,t,e)},k=async e=>{if(!S)return null;let t=await S;return await t.get(B,e)},L=async()=>{if(!S)return;let e=await S;await e.clear(B)},M=e=>{for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var P=()=>{let[e,t]=(0,c.useState)([]),[n,r]=(0,c.useState)(null),[s,a]=(0,c.useState)(null),[i,l]=(0,c.useState)(0),[d,h]=(0,c.useState)(0),[p,f]=(0,c.useState)(!1),[w,m]=(0,c.useState)(!1),[g,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let e=await k("questions"),n=await k("correctAnswersCount"),s=await k("incorrectAnswersCount");e?(t(e),l(n||0),h(s||0),e.length>0&&r(e[Math.floor(Math.random()*e.length)])):fetch("/canadatestprep/questions.json").then(e=>e.json()).then(e=>{let n=e.map(e=>({...e,possible_answers:M(e.possible_answers)}));t(n),q("questions",n)})})()},[]),(0,c.useEffect)(()=>{(async()=>{await q("questions",e),await q("correctAnswersCount",i),await q("incorrectAnswersCount",d)})()},[e,i,d]);let b=e=>{a(e)},j=async()=>{let e=await fetch("/canadatestprep/questions.json"),n=(await e.json()).map(e=>({...e,possible_answers:M(e.possible_answers)}));t(n),l(0),h(0),r(n[0]),a(null),f(!1),m(!1),x(null),await L(),await q("questions",n)},v=i+d+e.length,y=e.length;return(0,o.jsxs)("div",{className:"quiz-container",children:[(0,o.jsxs)(u(),{children:[(0,o.jsx)("title",{children:"Canada Test Prep Quiz"}),(0,o.jsx)("link",{rel:"stylesheet",href:"/canadatestprep/styles.css"})]}),(0,o.jsxs)("header",{className:"quiz-header",children:[(0,o.jsx)("h1",{children:"Canada Test Prep Quiz"}),(0,o.jsxs)("div",{className:"stats-reset",children:[(0,o.jsxs)("div",{className:"stats",children:["Correct ",i," (",(i/v*100).toFixed(0),"%) Incorrect ",d," (",(d/v*100).toFixed(0),"%) Remains ",y]}),(0,o.jsx)("button",{onClick:j,className:"reset-button",children:"Reset"})]})]}),(0,o.jsx)("main",{className:"quiz-main",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"question-section",children:(0,o.jsx)("div",{className:"question-text",children:n.question})}),(0,o.jsx)("div",{className:"answer-section",children:n.possible_answers.map((e,t)=>(0,o.jsx)("button",{onClick:()=>b(t),className:"answer-button ".concat(s===t?"selected":""),disabled:w,children:e.answer_text},t))}),w&&(0,o.jsx)("div",{className:"result-message ".concat(g?"correct":"incorrect"),children:g?"Correct!":"Incorrect!"}),(0,o.jsx)("button",{onClick:w?()=>{a(null),f(!1),m(!1),x(null),e.length>0?r(e[Math.floor(Math.random()*e.length)]):r(null)}:()=>{if(null===s)return;let e=n.possible_answers[s].is_correct;x(e),e?(l(e=>e+1),t(e=>e.filter(e=>e!==n))):h(e=>e+1),m(!0)},className:"submit-button",disabled:null===s,children:w?"Next Question":"Submit"}),(0,o.jsx)("button",{onClick:()=>f(!p),className:"answer-button",children:p?"Hide Answer":"Show Answer"}),p&&(0,o.jsxs)("div",{className:"answer-section",children:[(0,o.jsx)("blockquote",{dangerouslySetInnerHTML:{__html:n.quote.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}}),(0,o.jsxs)("p",{children:["Source: ",(0,o.jsx)("a",{href:n.online_page,target:"_blank",rel:"noopener noreferrer",children:n.paragraph})]}),(0,o.jsxs)("p",{children:["Discover Canada, Page ",n.page,", ",n.paragraph]})]})]}):(0,o.jsx)("p",{children:"No questions available."})}),(0,o.jsx)("footer",{className:"quiz-footer",children:"Canada Test Prep \xa92024"})]})}},9008:function(e,t,n){e.exports=n(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);